Vue.component("login-form",{template:"#login-form-template",data:function(){return{isBusy:!1,page:"login",email:"",pass:""}},methods:{loginAttempt:function(){var vm=this;UserKeychain.resetStorage(),UserKeychain.setPassword(vm.pass);var ajaxData={email:vm.email,passhash:UserKeychain.PassHash};$.post({url:"/login",data:json_encode(ajaxData),dataType:"json",success:function(result){UserKeychain.setContentKey(result.contentKeyEncrypted),UserKeychain.ContentKey?(UserKeychain.saveToStorage(),location.reload()):Alerts.error("Error decrypting ContentKey",{layout:"topRight"})},error:function(jqXHR,textStatus,errorThrown){Alerts.error(jqXHR.responseText,{layout:"topRight"})}})},requestPasswordReset:function(){var vm=this;vm.isBusy=!0,$.post({url:"/request-password-reset",data:json_encode({email:vm.email}),dataType:"text",success:function(result){Alerts.success(result),vm.isBusy=!1},error:function(jqXHR,textStatus,errorThrown){Alerts.error(jqXHR.responseText,{layout:"topRight"}),vm.isBusy=!1}})}}});var vue_container=new Vue({el:"#page-container"});